!function(o,s){function t(){this.init=function(){this.initData(),this.getDate("../mock/data.json")}}t.prototype.initData=function(){this.dataList=[],this.i=0,this.isPlay=!1,this.foot=document.querySelectorAll("footer i")},t.prototype.getDate=function(t){var i=this;o.ajax({url:t,method:"get",success:function(t){i.dataList=t,i.loadStat(i.dataList,i.i),i.hander()},error:function(){console.log("数据加载错误")}})},t.prototype.loadStat=function(t,i){var o=this;s.audio(t[i]),s.music.init(t[i].audio),s.progressBar.init(t[i],function(){return s.music.curTime()}),this.isPlay?s.music.play(this.isPlay):s.music.pause(this.isPlay),s.music.songEnd(function(){o.switchSong("next")})},t.prototype.hander=function(){var i=this;this.foot[2].addEventListener("touchend",function(){return i.isPlay?(i.isPlay=!1,s.music.pause(i.isPlay),void s.progressBar.controlTime(!1)):(i.isPlay=!0,s.music.play(i.isPlay),void s.progressBar.controlTime(!0))}),this.foot[1].addEventListener("touchend",function(){i.switchSong("pre")}),this.foot[3].addEventListener("touchend",function(){i.switchSong("next")}),this.foot[4].addEventListener("touchend",function(){s.list.render(i.dataList,i.i,function(t){i.i=t,i.loadStat(i.dataList,i.i)}),s.list.up()})},t.prototype.switchSong=function(t){var i=this.dataList.length-1;"pre"===t?this.i<=0?this.i=i:this.i--:this.i==i?this.i=0:this.i++,this.loadStat(this.dataList,this.i)},s.loadMusic=new t,s.loadMusic.init()}(window.Zepto,window.play);