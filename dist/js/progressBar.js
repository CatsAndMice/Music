!function(r){function t(){this.init=function(t,i){this.initData(t),this.fn=i,this.drag()}}t.prototype.initData=function(t){this.data=t,this.time=null,this.bar=document.querySelector(".progressBar"),this.curTime=0,this.render(t.duration,this.bar.querySelector(".endTime")),this.curTimeDom=this.bar.querySelector(".statTime"),this.width=this.bar.querySelector(".line").offsetWidth,this.bag=this.bar.querySelector(".bag"),this.dot=this.bar.querySelector(".dot"),this.proportion()},t.prototype.drag=function(){var e=0,o=(this.dot.getClientRects()[0].left,0),n=this;this.dot.addEventListener("touchstart",function(t){var i=t.touches[0];e=i.clientX-this.offsetLeft}),this.dot.addEventListener("touchmove",function(t){cancelAnimationFrame(n.time);var i=(i=t.touches[0].clientX-e)>n.width?n.width:i;o=i=i<0?0:i,this.style.left=i+"px",n.bag.style.width=i+"px"}),this.dot.addEventListener("touchend",function(t){var i=n.getPro(o);r.music.setCurTime(i),n.render(i,n.curTimeDom),r.loadMusic.isPlay&&n.move()})},t.prototype.getPro=function(t){return t/this.width*this.data.duration},t.prototype.proportion=function(t){var i=100/parseInt(this.data.duration);this.bag.style.width=i*t+"%",this.dot.style.left=i*t+"%"},t.prototype.render=function(t,i){var e=Math.trunc(t/60),o=Math.trunc(t-60*e),e=e<10?"0"+e:e,o=o<10?"0"+o:o;i.innerHTML=e+":"+o},t.prototype.move=function(){var o=Date.now(),n=this;cancelAnimationFrame(this.time),function t(){var i,e=Date.now();1e3<=e-o&&(i=n.fn(),n.render(i,n.curTimeDom),n.proportion(i),o=e),n.time=requestAnimationFrame(t)}()},t.prototype.controlTime=function(t){t?this.move(this.fn):cancelAnimationFrame(this.time)},r.progressBar=new t}(window.play||(window.play={}));